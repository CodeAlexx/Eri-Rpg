Repository Review Findings

Findings
- High: Learnings are written to v1 graph knowledge, but graph saves no longer persist knowledge, so `learn` is effectively lost and downstream flows see empty knowledge. `erirpg/cli.py:887` `erirpg/graph.py:133` `erirpg/modes/work.py:113` `erirpg/modes/take.py:178` `erirpg/cli.py:1428`
- High: Context generation does not hydrate CodeRefs or load v2 knowledge because `source_project` is omitted at call sites, so ref-only features show “Code not available” and ignore `knowledge.json`. `erirpg/cli.py:643` `erirpg/modes/take.py:408` `erirpg/context.py:107`
- Medium: Token estimates only count snapshot code; ref-only features report near-zero tokens, which is misleading. `erirpg/context.py:320`
- Low: Spec IDs are not deterministic despite the docstring; they include a timestamp. `erirpg/specs.py:53` `erirpg/specs.py:63`
- Medium: No integration tests cover CLI `learn` persistence or context hydration with ref-only features; existing tests are store-only. `tests/test_memory_system.py:38`

Questions
- Should CLI flows (`learn/recall/relearn`, `work`, `take`, `plan generate`) use the v2 knowledge store (`knowledge.json`) and CodeRefs by default, or should v1 embedding be restored?
- Should `generate_context` infer `source_project` from `feature.source_project` when callers omit it, or should all call sites pass it explicitly?
